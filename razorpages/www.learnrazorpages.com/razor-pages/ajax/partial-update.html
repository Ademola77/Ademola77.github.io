<!DOCTYPE html>
<html>

<!-- Mirrored from www.learnrazorpages.com/razor-pages/ajax/partial-update by HTTrack Website Copier/3.x [XR&CO'2005], Fri, 07 Jun 2019 04:18:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="AJAX is a technique used for making requests from the browser to the server for various purposes such as the retrieval of assorted content including data, HTML, XML, posting form values and so on." />
    <meta name="google-site-verification" content="MpV6gEoCh9OASgnoi656klwnlkni3_qOenITGlxBrjc" />
    <title>Partial Page Update with AJAX in Razor Pages | Learn Razor Pages</title>
    <link rel="canonical" href="partial-update.html" />
    <link rel="stylesheet" href="../../../ajax.aspnetcdn.com/ajax/bootstrap/3.3.6/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i|Roboto:300i,500,700" />
    <link rel="stylesheet" href="../../../use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="../../../cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <link rel="stylesheet" href="../../css/site8249.css?v=PCA7f9VuZUscxMwrePJfyFKXCF9mh2dMpXEDQU8oP3o" />
    <link rel="stylesheet" href="../../css/rp14c5.css?v=ZxkVB0StHjR5-UMElJII7nwWe6Wmc6_qgJ97GsY4yNw" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-8046723421340367",
                enable_page_level_ads: true
            });
        </script>
</head>
<body id="page-top">
    <div class="navbar navbar-default navbar-static-top">
        <div>
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="navbar-brand">
                    <i class="fas fa-graduation-cap"></i> <a href="../../index.html">Learn Razor Pages</a>
                    <br />
                    <span class="byline">Your guide to using ASP.NET Core Razor Pages</span>
                </div>
                <div class="banner">
                    
                        <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
                        <!-- EF Core Leaderboard -->
                        <ins class="adsbygoogle"
                             style="display:inline-block;width:728px;height:90px"
                             data-ad-client="ca-pub-8046723421340367"
                             data-ad-slot="1832525889"></ins>
                        <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>                    
                </div>
            </div>

        </div>
    </div>
    <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse">
            <nav class="main-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <ul class="nav nav-level-one" id="side-menu">
        <li>
            <a itemprop="url" href="../../index.html">Home</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../first-look.html">A First Look</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../asp-net-core.html">ASP.NET Core</a>
        </li>
        <li><a itemprop="url" href="../tutorial/bakery.html">Tutorials</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../tutorial/bakery.html">The Bakery</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../razor-pages.html">Razor Page Files</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../files/index.html">Razor Files</a></li>
                <li><a itemprop="url" href="../partial-pages.html">Partial Pages</a></li>
                <li><a itemprop="url" href="../files/layout.html">Layout Files</a></li>
                <li><a itemprop="url" href="../files/viewimports.html">ViewImports File</a></li>
                <li><a itemprop="url" href="../files/viewstart.html">ViewStart File</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../razor-syntax.html">Razor Syntax</a>
        </li>
        <li>
            <a itemprop="url" href="../pagemodel.html">Page Models</a>
            <ul class="nav-level-two">
                <li>
                    <a itemprop="url" href="../handler-methods.html">Handler Methods</a>
                </li>
                <li>
                    <a itemprop="url" href="../viewdata.html">ViewData</a>
                </li>
                <li>
                    <a itemprop="url" href="../action-results.html">Action Results</a>
                </li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../tag-helpers/index.html">Tag Helpers</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../tag-helpers/anchor-tag-helper.html">Anchor Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/cache-tag-helper.html">Cache Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/distributed-cache-tag-helper.html">Distributed Cache Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/environment-tag-helper.html">Environment Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/form-action-tag-helper.html">Form Action Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/form-tag-helper.html">Form Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/image-tag-helper.html">Image Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/input-tag-helper.html">Input Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/label-tag-helper.html">Label Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/link-tag-helper.html">Link Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/option-tag-helper.html">Option Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/partial-tag-helper.html">Partial Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/script-tag-helper.html">Script Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/select-tag-helper.html">Select Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/textarea-tag-helper.html">TextArea Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/validation-message-tag-helper.html">Validation Message Tag Helper</a></li>
                <li><a itemprop="url" href="../tag-helpers/validation-summary-tag-helper.html">Validation Summary Tag Helper</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../view-components.html">View Components</a>
        </li>
        <li>
            <a itemprop="url" href="../routing.html">Routing and URLs</a>
            <ul class="nav-level-two">
                <li><a href="../../advanced/custom-route-conventions.html">Customising Route Conventions</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../startup.html">Startup</a>
        </li>
        <li>
            <a itemprop="url" href="../../configuration.html">Configuration</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../configuration/global-error-handling.html">Global Error Handling And Logging</a></li>
                <li><a itemprop="url" href="../../configuration/custom-errors.html">Custom Error Pages</a></li>
                <li><a itemprop="url" href="../../configuration/https.html">Configuring HTTPS</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../middleware.html">Middleware</a>
        </li>
        <li>
            <a itemprop="url" href="../forms.html">Working With Forms</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../forms/file-upload.html">Uploading Files in Razor Pages</a></li>
                <li><a itemprop="url" href="../forms/checkboxes.html">Working With Checkboxes</a></li>
                <li><a itemprop="url" href="../forms/select-lists.html">Select Lists in a Razor Pages Form</a></li>
                <li><a itemprop="url" href="../forms/radios.html">Working With Radio Buttons</a></li>
                <li><a itemprop="url" href="../../security/request-verification.html">Request Verification</a></li>
            </ul>
        </li>
        <li><a itemprop="url" href="../validation.html">Validation</a></li>
        <li>
            <a itemprop="url" href="../model-binding.html">Model Binding</a>
        </li>
        <li>
            <a itemprop="url" href="../state-management.html">State Management</a>
        </li>
        <li>
            <a itemprop="url" href="../caching.html">Caching</a>
        </li>
        <li>
            <a itemprop="url" href="../../identity.html">Managing Security With ASP.NET Identity</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../identity/customising-identity.html">Customising Identity</a></li>
            </ul>
        </li>
        <li>
		<a itemprop="url" href="../ajax.html">Using AJAX</a>
		<ul class="nav-level-two">
			<li><a itemprop="url" href="form-post.html">Posting Forms</a>    </li>
			<li><a itemprop="url" href="partial-update.html">Partial Page Updates</a></li>
			<li><a itemprop="url" href="upload-files.html">Uploading Files</a></li>
			<li><a itemprop="url" href="unobtrusive-ajax.html">Unobtrusive AJAX</a></li>
		</ul>
	</li>
        <li>
            <a itemprop="url" href="../../web-api.html">Working with JSON</a>
        </li>
        <li>
            <a itemprop="url" href="../../miscellaneous/scaffolding.html">Scaffolding</a>
        </li>
        <li>
            <a itemprop="url" href="../../publishing/publish-to-iis.html">Publishing To IIS</a>
        </li>
        <li>
            <a itemprop="url" href="../../advanced.html">Advanced</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../advanced/areas.html">Areas</a></li>
                <li><a itemprop="url" href="../../advanced/custom-tag-helpers.html">Custom Tag Helpers</a></li>
                <li><a itemprop="url" href="../../advanced/custom-route-conventions.html">Customising Route Conventions</a></li>
                <li><a itemprop="url" href="../../advanced/custom-constraints.html">Custom Route Constraints</a></li>
                <li><a itemprop="url" href="../../advanced/route-parameter-transformers.html">Parameter Transformers For Routes</a></li>
                <li><a itemprop="url" href="../../advanced/dependency-injection.html">Dependency Injection</a></li>
                <li><a itemprop="url" href="../filters.html">Filters</a></li>
                <li><a itemprop="url" href="../../advanced/razor-class-library.html">Razor Class Libraries</a></li>
                <li><a itemprop="url" href="../../advanced/render-partial-to-string.html">Rendering A Partial View To A String</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../table-of-contents.html">Table Of Contents</a>
        </li>
    </ul>
</nav>

            <footer>
                <p>&copy; 2019 - Learn Razor Pages.<br />All rights reserved.</p>
            </footer>
        </div>
        <!-- /.sidebar-collapse -->
    </div>

    <div id="page-wrapper">
        <div class="body-content">
            <div class="row">
                <div class="col-md-9">
                    
<div id="article">
    <h1 itemprop="headline" id="partial-page-update-with-ajax-in-razor-pages">Partial Page Update with AJAX in Razor Pages</h1>
<div itemprop="articleBody"><p><a href="../partial-pages.html">Partial Pages</a> consist of fragments of HTML and server-side code to be included in any number of pages or layouts. Partial pages can be used to break up complex pages into smaller units, thereby reducing the complexity and allowing teams to work on different units concurrently. They can also be used to provide content for updating part of the rendered web page via AJAX in client side script.</p>
<p>A partial page is a single .cshtml file. It has no PageModel and it doesn't have an @page directive at the top. A partial can be strongly typed - have an @model directive, or it can work purely with ViewData. For the purposes of this article, I will be using a strongly typed partial.</p>
<p>The example features the same <code>ICarService</code> used in <a href="../../web-api.html">Working with JSON in Razor Pages</a>. A collection of <code>Car</code> objects will be passed to the partial for display, which will be invoked via client-side script:</p>
<p>First, the Car entity:</p>
<pre><code class="language-csharp">public class Car
{
    public int Id { get; set; }
    public string Make { get; set; }
    public string Model { get; set; }
    public int Year { get; set; }
    public int Doors { get; set; }
    public string Colour { get; set; }
    public decimal Price { get; set; }
}
</code></pre>
<p>The service has one method that conforms to an interface, generating and returning a list of cars:</p>
<pre><code>public interface ICarService
{
    List&lt;Car&gt; GetAll();
}

public class CarService : ICarService
{
    public List&lt;Car&gt; GetAll()
    {
        List&lt;Car&gt; cars = new List&lt;Car&gt;{
            new Car{Id = 1, Make=&quot;Audi&quot;,Model=&quot;R8&quot;,Year=2014,Doors=2,Colour=&quot;Red&quot;,Price=79995},
            new Car{Id = 2, Make=&quot;Aston Martin&quot;,Model=&quot;Rapide&quot;,Year=2010,Doors=2,Colour=&quot;Black&quot;,Price=54995},
            new Car{Id = 3, Make=&quot;Porsche&quot;,Model=&quot; 911 991&quot;,Year=2016,Doors=2,Colour=&quot;White&quot;,Price=155000},
            new Car{Id = 4, Make=&quot;Mercedes-Benz&quot;,Model=&quot;GLE 63S&quot;,Year=2017,Doors=5,Colour=&quot;Blue&quot;,Price=83995},
            new Car{Id = 5, Make=&quot;BMW&quot;,Model=&quot;X6 M&quot;,Year=2016,Doors=5,Colour=&quot;Silver&quot;,Price=62995},
        };
        return cars;
    }
}
</code></pre>
<p>This service is registered with the ASP.NET Core Dependency Injection system so that it can be made available throughout the application:</p>
<pre><code class="language-csharp">public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc();
    services.AddTransient&lt;ICarService, CarService&gt;();
}
</code></pre>
<p>The partial itself is contains an HTML table styled using Bootstrap. It is named _<em>CarPartial.cshtml</em> and is placed in the <em>Pages/Shared</em> folder - that being one of the default search locations for partials in Razor Pages. The model that the partial expects is a <code>List&lt;Car&gt;</code>:</p>
<pre><code class="language-html">@model List&lt;Car&gt;

&lt;table class=&quot;table table-striped&quot;&gt;
@foreach(var car in Model)
{
    &lt;tr&gt;
        &lt;td&gt;@car.Model&lt;/td&gt;
        &lt;td&gt;@car.Make&lt;/td&gt;
        &lt;td&gt;@car.Year&lt;/td&gt;
        &lt;td&gt;<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="1b3f5b787a69354b6972787e">[email&#160;protected]</a>&lt;/td&gt;
    &lt;/tr&gt;
}
&lt;/table&gt;
</code></pre>
<p>Most often, the <a href="../handler-methods.html">handler method</a> that serves up partials will not be the primary handler method in a specific page. Instead, a <a href="../handler-methods.html#named-handler-methods">named handler</a> will be used. The following code shows a basic <code>PageModel</code> that includes a named handler (<code>OnGetCarPartial</code>) returning a <code>PartialViewResult</code>:</p>
<pre><code class="language-csharp">public class AjaxPartialModel : PageModel
{
    private ICarService _carService;
    public AjaxPartialModel(ICarService carService)
    {
        _carService = carService;
    }

    public List&lt;Car&gt; Cars { get; set; }
    public void OnGet()
    {
    }

    public PartialViewResult OnGetCarPartial()
    {
        Cars = _carService.GetAll();
        return Partial(&quot;_CarPartial&quot;, Cars);
    }
}
</code></pre>
<div class="alert alert-info"><p>The <code>Partial</code> helper method was added to the <code>PageModel</code> class in ASP.NET Core 2.2. In Razor Pages versions up to and including 2.1, you must explicitly create an instance of <code>PartialViewResult</code> and return that from the handler, passing in the current <code>ViewData</code> dictionary and, optionally, a model for the partial (if it expects one):</p>
<pre><code class="language-csharp">public PartialViewResult OnGetCarPartial()
{
    Cars = _carService.GetAll();
    return new PartialViewResult {
        ViewName = &quot;_CarPartial&quot;,
        ViewData = new ViewDataDictionary&lt;List&lt;Car&gt;&gt;(ViewData, Cars)
    };
}
</code></pre>
</div>
<p>Here is the content page where jQuery is used to make the AJAX request when the button is clicked:</p>
<pre><code class="language-html">@page
@model RazorPagesTests.Pages.AjaxPartialModel


&lt;h2&gt;Ajax&lt;/h2&gt;
&lt;p&gt;&lt;button class=&quot;btn btn-primary&quot; id=&quot;load&quot;&gt;Load&lt;/button&gt;&lt;/p&gt;
&lt;div id=&quot;grid&quot;&gt;&lt;/div&gt;

@section scripts{
    &lt;script&gt;
        $(function () {
            $('#load').on('click', function () {
                $('#grid').load('/ajaxpartial?handler=CarPartial');
            });
        });
    &lt;/script&gt;
}
</code></pre>
<p>Notice particularly the URL that is passed to the <code>load</code> method - the name of the named handler method (without the <code>OnGet</code> part) is passed to a query string value called <code>handler</code>. If you prefer not to have a query string, you can create a route template in the Razor Page that adds an optional item named handler to the route values:</p>
<pre><code class="language-csharp">@page &quot;{handler?}&quot;
</code></pre>
<p>This enables you to can pass the name of the handler as a segment of the URL:</p>
<pre><code>$('#grid').load('/ajaxpartial/carpartial');
</code></pre>
<p>Here is an alternative version that uses the Fetch API instead of the XMLHttpRequest object via jQuery:</p>
<pre><code class="language-html">@page
@model RazorPagesTests.Pages.AjaxPartialModel


&lt;h2&gt;Ajax&lt;/h2&gt;
&lt;p&gt;&lt;button class=&quot;btn btn-primary&quot; id=&quot;load&quot;&gt;Load&lt;/button&gt;&lt;/p&gt;
&lt;div id=&quot;grid&quot;&gt;&lt;/div&gt;

@section scripts{
    &lt;script&gt;
        document.getElementById('load').addEventListener('click', () =&gt; {
            fetch('/ajaxpartial?handler=CarPartial')
                .then((response) =&gt; {
                    return response.text();
                })
                .then((result) =&gt; {
                    document.getElementById('grid').innerHTML = result;
                });
        });
    &lt;/script&gt;
}
</code></pre>

</div>
</div>
<section id="file-meta">
    <span class="file-meta-label">Last updated:</span> <span itemprop="dateModified">15/01/2019 09:46:50</span><br />
</section>

                </div>
                <div class="col-md-3 right-col">
                    
                            <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
                        (function() {
                            var cx = 'partner-pub-8046723421340367:6108194070';
                            var gcse = document.createElement('script');
                            gcse.type = 'text/javascript';
                            gcse.async = true;
                            gcse.src = '../../../cse.google.com/cse07b6.html?cx=' + cx;
                            var s = document.getElementsByTagName('script')[0];
                            s.parentNode.insertBefore(gcse, s);
                        })();
                            </script>
                        <gcse:searchbox-only></gcse:searchbox-only>
                    
                    <div id="doc-outline" class="doc-outline well">
                            <h3 class="doc-outline">On this page</h3>
                            <nav class="doc-outline">
                                <ul>
                                        <li><a itemprop="url" href="#partial-page-update-with-ajax-in-razor-pages" class="page-scroll">Partial Page Update with AJAX in Razor Pages</a></li>
                                </ul>
                            </nav>

                    </div>
                    <div class="rectangle">
                        
                                <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
                            <!-- EF Core Rectangle -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:300px;height:250px"
                                 data-ad-client="ca-pub-8046723421340367"
                                 data-ad-slot="7622896857"></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        
                    </div>
                    <div class="doc-outline well">
                        <h3 class="doc-outline">Latest Updates</h3>
                        <nav class="doc-outline">
                            <ul>
                                    <li><a itemprop="url" href="../tutorial/bakery/migration.html">Creating A Migration</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery/create-model.html">Working With A Model</a></li>
                                    <li><a itemprop="url" href="../routing.html">Routing in Razor Pages</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery/working-with-data.html">Working With Data</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery/new-page.html">Adding a New Page</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery.html">Creating an Application</a></li>
                            </ul>
                        </nav>
                    </div>
                    <div class="skyscraper">
                        
                                <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
                            <!-- EF Core Skyscraper -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:300px;height:600px"
                                 data-ad-client="ca-pub-8046723421340367"
                                 data-ad-slot="4239197376"></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        
                    </div>
                    <footer>
                        <p>&copy; 2019 - Learn Razor Pages.<br />All rights reserved.</p>
                    </footer>
                </div>
            </div>
        </div>
        <a href="#page-top" id="back-to-top" class="page-scroll" title="Back to top"><i class="fas fa-arrow-alt-circle-up"></i></a>
    </div>
    <div class="cookie-box" id="cookie-warning">
        <div class="cookie-box-contents" id="learnrazorpages">This site uses cookies to analyse traffic, remember your preferences, and optimise your experience.</div>
        <div class="cookie-box-buttons"><a href="../../privacy.html" class="cookie-button">Learn more</a><a href="#" class="cookie-button" id="cookie-close">Close</a></div>
    </div>
    <script src="../../../ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"></script>
    <script src="../../../ajax.aspnetcdn.com/ajax/bootstrap/3.3.6/bootstrap.min.js"></script>
    <script src="../../../code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    
    <script src="../../../cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <script src="../../js/site59f2.js?v=gJZRD7PDF8oEm1Xb0uhLZcpf7Vs12fGO-q0DErBSF_Y"></script>
    
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1264020-21"></script>
        <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-1264020-21');
        </script>
    
    
</body>

<!-- Mirrored from www.learnrazorpages.com/razor-pages/ajax/partial-update by HTTrack Website Copier/3.x [XR&CO'2005], Fri, 07 Jun 2019 04:18:00 GMT -->
</html>
