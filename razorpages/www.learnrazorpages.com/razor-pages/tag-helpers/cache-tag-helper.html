<!DOCTYPE html>
<html>

<!-- Mirrored from www.learnrazorpages.com/razor-pages/tag-helpers/cache-tag-helper by HTTrack Website Copier/3.x [XR&CO'2005], Fri, 07 Jun 2019 04:07:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="The cache tag helper caches content in memory on the sever for a specified period" />
    <meta name="google-site-verification" content="MpV6gEoCh9OASgnoi656klwnlkni3_qOenITGlxBrjc" />
    <title>The Cache Tag Helper in Razor Pages | Learn Razor Pages</title>
    <link rel="canonical" href="cache-tag-helper.html" />
    <link rel="stylesheet" href="../../../ajax.aspnetcdn.com/ajax/bootstrap/3.3.6/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i|Roboto:300i,500,700" />
    <link rel="stylesheet" href="../../../use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="../../../cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <link rel="stylesheet" href="../../css/site8249.css?v=PCA7f9VuZUscxMwrePJfyFKXCF9mh2dMpXEDQU8oP3o" />
    <link rel="stylesheet" href="../../css/rp14c5.css?v=ZxkVB0StHjR5-UMElJII7nwWe6Wmc6_qgJ97GsY4yNw" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-8046723421340367",
                enable_page_level_ads: true
            });
        </script>
</head>
<body id="page-top">
    <div class="navbar navbar-default navbar-static-top">
        <div>
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="navbar-brand">
                    <i class="fas fa-graduation-cap"></i> <a href="../../index.html">Learn Razor Pages</a>
                    <br />
                    <span class="byline">Your guide to using ASP.NET Core Razor Pages</span>
                </div>
                <div class="banner">
                    
                        <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
                        <!-- EF Core Leaderboard -->
                        <ins class="adsbygoogle"
                             style="display:inline-block;width:728px;height:90px"
                             data-ad-client="ca-pub-8046723421340367"
                             data-ad-slot="1832525889"></ins>
                        <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>                    
                </div>
            </div>

        </div>
    </div>
    <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse">
            <nav class="main-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
    <ul class="nav nav-level-one" id="side-menu">
        <li>
            <a itemprop="url" href="../../index.html">Home</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../first-look.html">A First Look</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../asp-net-core.html">ASP.NET Core</a>
        </li>
        <li><a itemprop="url" href="../tutorial/bakery.html">Tutorials</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../tutorial/bakery.html">The Bakery</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../razor-pages.html">Razor Page Files</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../files/index.html">Razor Files</a></li>
                <li><a itemprop="url" href="../partial-pages.html">Partial Pages</a></li>
                <li><a itemprop="url" href="../files/layout.html">Layout Files</a></li>
                <li><a itemprop="url" href="../files/viewimports.html">ViewImports File</a></li>
                <li><a itemprop="url" href="../files/viewstart.html">ViewStart File</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../razor-syntax.html">Razor Syntax</a>
        </li>
        <li>
            <a itemprop="url" href="../pagemodel.html">Page Models</a>
            <ul class="nav-level-two">
                <li>
                    <a itemprop="url" href="../handler-methods.html">Handler Methods</a>
                </li>
                <li>
                    <a itemprop="url" href="../viewdata.html">ViewData</a>
                </li>
                <li>
                    <a itemprop="url" href="../action-results.html">Action Results</a>
                </li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="index.html">Tag Helpers</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="anchor-tag-helper.html">Anchor Tag Helper</a></li>
                <li><a itemprop="url" href="cache-tag-helper.html">Cache Tag Helper</a></li>
                <li><a itemprop="url" href="distributed-cache-tag-helper.html">Distributed Cache Tag Helper</a></li>
                <li><a itemprop="url" href="environment-tag-helper.html">Environment Tag Helper</a></li>
                <li><a itemprop="url" href="form-action-tag-helper.html">Form Action Tag Helper</a></li>
                <li><a itemprop="url" href="form-tag-helper.html">Form Tag Helper</a></li>
                <li><a itemprop="url" href="image-tag-helper.html">Image Tag Helper</a></li>
                <li><a itemprop="url" href="input-tag-helper.html">Input Tag Helper</a></li>
                <li><a itemprop="url" href="label-tag-helper.html">Label Tag Helper</a></li>
                <li><a itemprop="url" href="link-tag-helper.html">Link Tag Helper</a></li>
                <li><a itemprop="url" href="option-tag-helper.html">Option Tag Helper</a></li>
                <li><a itemprop="url" href="partial-tag-helper.html">Partial Tag Helper</a></li>
                <li><a itemprop="url" href="script-tag-helper.html">Script Tag Helper</a></li>
                <li><a itemprop="url" href="select-tag-helper.html">Select Tag Helper</a></li>
                <li><a itemprop="url" href="textarea-tag-helper.html">TextArea Tag Helper</a></li>
                <li><a itemprop="url" href="validation-message-tag-helper.html">Validation Message Tag Helper</a></li>
                <li><a itemprop="url" href="validation-summary-tag-helper.html">Validation Summary Tag Helper</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../view-components.html">View Components</a>
        </li>
        <li>
            <a itemprop="url" href="../routing.html">Routing and URLs</a>
            <ul class="nav-level-two">
                <li><a href="../../advanced/custom-route-conventions.html">Customising Route Conventions</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../startup.html">Startup</a>
        </li>
        <li>
            <a itemprop="url" href="../../configuration.html">Configuration</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../configuration/global-error-handling.html">Global Error Handling And Logging</a></li>
                <li><a itemprop="url" href="../../configuration/custom-errors.html">Custom Error Pages</a></li>
                <li><a itemprop="url" href="../../configuration/https.html">Configuring HTTPS</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../middleware.html">Middleware</a>
        </li>
        <li>
            <a itemprop="url" href="../forms.html">Working With Forms</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../forms/file-upload.html">Uploading Files in Razor Pages</a></li>
                <li><a itemprop="url" href="../forms/checkboxes.html">Working With Checkboxes</a></li>
                <li><a itemprop="url" href="../forms/select-lists.html">Select Lists in a Razor Pages Form</a></li>
                <li><a itemprop="url" href="../forms/radios.html">Working With Radio Buttons</a></li>
                <li><a itemprop="url" href="../../security/request-verification.html">Request Verification</a></li>
            </ul>
        </li>
        <li><a itemprop="url" href="../validation.html">Validation</a></li>
        <li>
            <a itemprop="url" href="../model-binding.html">Model Binding</a>
        </li>
        <li>
            <a itemprop="url" href="../state-management.html">State Management</a>
        </li>
        <li>
            <a itemprop="url" href="../caching.html">Caching</a>
        </li>
        <li>
            <a itemprop="url" href="../../identity.html">Managing Security With ASP.NET Identity</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../identity/customising-identity.html">Customising Identity</a></li>
            </ul>
        </li>
        <li>
		<a itemprop="url" href="../ajax.html">Using AJAX</a>
		<ul class="nav-level-two">
			<li><a itemprop="url" href="../ajax/form-post.html">Posting Forms</a>    </li>
			<li><a itemprop="url" href="../ajax/partial-update.html">Partial Page Updates</a></li>
			<li><a itemprop="url" href="../ajax/upload-files.html">Uploading Files</a></li>
			<li><a itemprop="url" href="../ajax/unobtrusive-ajax.html">Unobtrusive AJAX</a></li>
		</ul>
	</li>
        <li>
            <a itemprop="url" href="../../web-api.html">Working with JSON</a>
        </li>
        <li>
            <a itemprop="url" href="../../miscellaneous/scaffolding.html">Scaffolding</a>
        </li>
        <li>
            <a itemprop="url" href="../../publishing/publish-to-iis.html">Publishing To IIS</a>
        </li>
        <li>
            <a itemprop="url" href="../../advanced.html">Advanced</a>
            <ul class="nav-level-two">
                <li><a itemprop="url" href="../../advanced/areas.html">Areas</a></li>
                <li><a itemprop="url" href="../../advanced/custom-tag-helpers.html">Custom Tag Helpers</a></li>
                <li><a itemprop="url" href="../../advanced/custom-route-conventions.html">Customising Route Conventions</a></li>
                <li><a itemprop="url" href="../../advanced/custom-constraints.html">Custom Route Constraints</a></li>
                <li><a itemprop="url" href="../../advanced/route-parameter-transformers.html">Parameter Transformers For Routes</a></li>
                <li><a itemprop="url" href="../../advanced/dependency-injection.html">Dependency Injection</a></li>
                <li><a itemprop="url" href="../filters.html">Filters</a></li>
                <li><a itemprop="url" href="../../advanced/razor-class-library.html">Razor Class Libraries</a></li>
                <li><a itemprop="url" href="../../advanced/render-partial-to-string.html">Rendering A Partial View To A String</a></li>
            </ul>
        </li>
        <li>
            <a itemprop="url" href="../../table-of-contents.html">Table Of Contents</a>
        </li>
    </ul>
</nav>

            <footer>
                <p>&copy; 2019 - Learn Razor Pages.<br />All rights reserved.</p>
            </footer>
        </div>
        <!-- /.sidebar-collapse -->
    </div>

    <div id="page-wrapper">
        <div class="body-content">
            <div class="row">
                <div class="col-md-9">
                    
<div id="article">
    <h1 itemprop="headline" id="the-cache-tag-helper">The Cache Tag Helper</h1>
<div itemprop="articleBody"><p>The cache tag helper enables you to cache regions of a Razor page in memory on the server. Typical uses for this helper are for View Components or partial views that require relatively expensive database or web service calls, but where the content doesn't change very often. This type of caching its primarily used to improve a website's performance.</p>
<p>Unlike most other tag helpers, the Cache tag helper doesn't target a standard HTML element. It targets the <code>&lt;cache&gt;</code> tag, which is not rendered to the browser and doesn't appear in the HTML source either.</p>
<div class="alert alert-warning"><p>The cache tag helper uses an in-memory-based store for content. This is volatile and can be cleared unexpectedly for any number of reasons, including app pool recycling, server restarts, low memory pressure and so on. The cache tag helper is not intended to be used for reliable long term storage.</p>
</div>
<table class="table">
<thead>
<tr>
<th style="text-align: left;">Attribute</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>enabled</code><sup>1</sup></td>
<td style="text-align: left;">Used to specify if this tag is enabled or not</td>
</tr>
<tr>
<td style="text-align: left;"><code>expires-after</code><sup>2</sup></td>
<td style="text-align: left;">Specifies the period of time after which the cached item should expire</td>
</tr>
<tr>
<td style="text-align: left;"><code>expires-on</code><sup>3</sup></td>
<td style="text-align: left;">Specifies the time at which the cached entry should expire</td>
</tr>
<tr>
<td style="text-align: left;"><code>expires-sliding</code><sup>4</sup></td>
<td style="text-align: left;">The period of time after the last access that the item should expire</td>
</tr>
<tr>
<td style="text-align: left;"><code>priority</code><sup>5</sup></td>
<td style="text-align: left;">Specifies the <code>CacheItemPriority</code> value of the cached item</td>
</tr>
<tr>
<td style="text-align: left;"><code>vary-by</code><sup>6</sup></td>
<td style="text-align: left;">Used to specify the parameters that determine whether different versions of the same content should be cached</td>
</tr>
</tbody>
</table>
<h2 id="notes">Notes</h2>
<ol>
<li><p>The cache tag helper is enabled by default. You might want to conditionally disable it under certain circumstances. The <code>enabled</code> attribute facilitates this. The cached item in this example is disabled on Sundays:</p>
<pre><code class="language-html">&lt;cache enabled=&quot;DateTime.Now.DayOfWeek != DayOfWeek.Sunday&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
</li>
<li><p>If you don't provide values for any of the <code>expires-*</code> attributes, your item will be cached without an expiration date, meaning that it will only expire when the memory store is cleared. The <code>expires-after</code> attribute takes a <code>TimeSpan</code> value that represents the period of time that the item should be stored in the cache. This example shows the item being stored for 1 hour:</p>
<pre><code class="language-html">&lt;cache expires-after=&quot;TimeSpan.FromHours(1)&quot;&gt;@DateTimeNow&lt;/cache&gt;
</code></pre>
</li>
<li><p>The <code>expires-on</code> attribute takes a <code>DateTimeOffset</code> value that specifies the absolute expiry time of an item. This item is set to expire at 8:15 am on June 14th 2017 UTC:</p>
<pre><code class="language-html">&lt;cache expires-on=&quot;new DateTimeOffset(new DateTime(2017, 6, 14, 8, 15, 0))&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
</li>
<li><p>An item can be set to expire after a specified period of inactivity. This is known as &quot;sliding expiration&quot;. The <code>expires-sliding</code> attribute takes a <code>TimeSpan</code> value. In this example, the item is set to expire 20 minutes after the last time the page was requested:</p>
<pre><code class="language-html">&lt;cache expires-sliding=&quot;TimeSpan.FromMinutes(20)&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
<p>As each request is made for the cached item, the expiration time is reset to 20 minutes after the request.</p>
</li>
<li><p>Items in the cache can have a priority applied to them, determining how they are dealt with when memory pressure results in items being cleared from the cache before their pre-ordained expiry time. The <code>priority</code> attribute takes a <code>CacheItemPriority</code> enum value that  specifies the relative priority of items in the cache. The available values are</p>
<ul>
<li>High</li>
<li>Low</li>
<li>Normal</li>
<li>NeverRemove</li>
</ul>
<p>Items with <code>High</code> priority will be the last to be removed. Items set as <code>NeverRemove</code> will remain in the cache. You should exercise caution when applying <code>NeverRemove</code> as there is a danger of overflowing the cache with more data than it can handle. This is how to set an item with <code>High</code> priority:</p>
<pre><code class="language-html">&lt;cache priority=&quot;CacheItemPriority.High&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
</li>
<li><p>You can cache multiple versions of the same content based on different criteria. The <code>vary-by</code> attribute provides a mechanism for you to specify the criteria to be used to determine whether to store another version of existing cached content.</p>
<p>The attribute has a number of preset options:</p>
<ul>
<li><code>vary-by-cookie</code></li>
<li><code>vary-by-header</code></li>
<li><code>vary-by-query</code></li>
<li><code>vary-by-route</code></li>
<li><code>vary-by-user</code></li>
</ul>
<h4 id="cookie">Cookie</h4>
<p>The values of cookies can be taken into consideration when caching different versions of content. The <code>vary-by-cookie</code> option takes a comma-separated string representing the names of the cookies:</p>
<pre><code class="language-html">&lt;cache vary-by-cookie=&quot;AppCookie1, AppCookie2&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
<h4 id="header">Header</h4>
<p>You can store multiple versions of content based on differing request header values. Multiple headers can be applied as a comma-separated string. This example stores different versions of the cached content based on the user's preferred language:</p>
<pre><code class="language-html">&lt;cache vary-by-header=&quot;Accept-Language&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
<h4 id="query">Query</h4>
<p>The <code>vary-by-query</code> option enables the use of query string parameters as the criteria for caching different versions. Query string parameter names are supplied in a comma-separated list:</p>
<pre><code class="language-html">&lt;cache vary-by-query=&quot;id&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
<h4 id="route">Route</h4>
<p>You can have route data parameters taken into account by using the <code>vary-by-route</code> option. This attribute also accepts a comma-separated string of route parameter names as a value:</p>
<pre><code class="language-html">&lt;cache vary-by-route=&quot;key1, key2&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
<h4 id="user">User</h4>
<p>The final built-in option enables you to specify that each user gets their own version of cached content. The <code>vary-by-user</code> attribute requires a <code>bool</code>, which should be set to <code>true</code>:</p>
<pre><code class="language-html">&lt;cache vary-by-user=&quot;true&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
<h4 id="string">String</h4>
<p>Finally, you can provide an arbitrary string value as a parameter if you want to use a value that isn't exposed by one of the preset options:</p>
<pre><code class="language-html">&lt;cache vary-by=&quot;@Model.Id&quot;&gt;@DateTime.Now&lt;/cache&gt;
</code></pre>
<p>You can use any combination of the <code>vary-by</code> attributes that you need.</p>
</li>
</ol>

</div>
</div>
<section id="file-meta">
    <span class="file-meta-label">Last updated:</span> <span itemprop="dateModified">27/02/2018 08:22:04</span><br />
</section>

                </div>
                <div class="col-md-3 right-col">
                    
                            <script>
                        (function() {
                            var cx = 'partner-pub-8046723421340367:6108194070';
                            var gcse = document.createElement('script');
                            gcse.type = 'text/javascript';
                            gcse.async = true;
                            gcse.src = '../../../cse.google.com/cse07b6.html?cx=' + cx;
                            var s = document.getElementsByTagName('script')[0];
                            s.parentNode.insertBefore(gcse, s);
                        })();
                            </script>
                        <gcse:searchbox-only></gcse:searchbox-only>
                    
                    <div id="doc-outline" class="doc-outline well">
                            <h3 class="doc-outline">On this page</h3>
                            <nav class="doc-outline">
                                <ul>
                                        <li><a itemprop="url" href="#the-cache-tag-helper" class="page-scroll">The Cache Tag Helper</a></li>
                                        <li><a itemprop="url" href="#notes" class="page-scroll">Notes</a></li>
                                </ul>
                            </nav>

                    </div>
                    <div class="rectangle">
                        
                                <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
                            <!-- EF Core Rectangle -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:300px;height:250px"
                                 data-ad-client="ca-pub-8046723421340367"
                                 data-ad-slot="7622896857"></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        
                    </div>
                    <div class="doc-outline well">
                        <h3 class="doc-outline">Latest Updates</h3>
                        <nav class="doc-outline">
                            <ul>
                                    <li><a itemprop="url" href="../tutorial/bakery/migration.html">Creating A Migration</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery/create-model.html">Working With A Model</a></li>
                                    <li><a itemprop="url" href="../routing.html">Routing in Razor Pages</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery/working-with-data.html">Working With Data</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery/new-page.html">Adding a New Page</a></li>
                                    <li><a itemprop="url" href="../tutorial/bakery.html">Creating an Application</a></li>
                            </ul>
                        </nav>
                    </div>
                    <div class="skyscraper">
                        
                                <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
                            <!-- EF Core Skyscraper -->
                            <ins class="adsbygoogle"
                                 style="display:inline-block;width:300px;height:600px"
                                 data-ad-client="ca-pub-8046723421340367"
                                 data-ad-slot="4239197376"></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        
                    </div>
                    <footer>
                        <p>&copy; 2019 - Learn Razor Pages.<br />All rights reserved.</p>
                    </footer>
                </div>
            </div>
        </div>
        <a href="#page-top" id="back-to-top" class="page-scroll" title="Back to top"><i class="fas fa-arrow-alt-circle-up"></i></a>
    </div>
    <div class="cookie-box" id="cookie-warning">
        <div class="cookie-box-contents" id="learnrazorpages">This site uses cookies to analyse traffic, remember your preferences, and optimise your experience.</div>
        <div class="cookie-box-buttons"><a href="../../privacy.html" class="cookie-button">Learn more</a><a href="#" class="cookie-button" id="cookie-close">Close</a></div>
    </div>
    <script src="../../../ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js"></script>
    <script src="../../../ajax.aspnetcdn.com/ajax/bootstrap/3.3.6/bootstrap.min.js"></script>
    <script src="../../../code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    
    <script src="../../../cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <script src="../../js/site59f2.js?v=gJZRD7PDF8oEm1Xb0uhLZcpf7Vs12fGO-q0DErBSF_Y"></script>
    
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1264020-21"></script>
        <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-1264020-21');
        </script>
    
    
</body>

<!-- Mirrored from www.learnrazorpages.com/razor-pages/tag-helpers/cache-tag-helper by HTTrack Website Copier/3.x [XR&CO'2005], Fri, 07 Jun 2019 04:07:46 GMT -->
</html>
